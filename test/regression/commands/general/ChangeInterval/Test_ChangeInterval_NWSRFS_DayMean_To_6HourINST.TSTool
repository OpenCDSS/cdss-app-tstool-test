# Test change interval from mean daily flow to 6-hour flow, and compare against NWSRFS mcp3 output
StartLog(LogFile="Results\Test_ChangeInterval_DayMean_To_6HourINST.TSTool.log")
RemoveFile(InputFile="Results\Test_ChangeInterval_DayMean_To_6HourINST_out.dv",IfNotFound=Ignore)
TS DayMEAN = NewPatternTimeSeries(NewTSID="ts1..SQME.Day",Description="Test data",SetStart="2006-12-01",SetEnd="2007-01-31",Units="CMSD",PatternValues="20,30,55,40,30,40,50,45,45,80,80,80,80")
#
# Write NWSCard file to allow running mcp3 to generate equivalent results from NWSRFS, and to run 3hour test using same input time series
#WriteNWSCard(OutputFile="Data\CHANGE-T_DAY_IN.SQME")
#
TS 6HourINST = ChangeInterval(TSID="DayMEAN",NewInterval=6Hour,OldTimeScale=MEAN,NewTimeScale=INST,NewDataType=CMS)
#
# Read the output from mcp3 CHANGE-T command
TS mcp3_6hr = ReadNwsCard(InputFile="Data\CHANGE-T_6hr_OUT.SQIN")
CompareTimeSeries(MatchDataType=True,Precision=5,Tolerance="0.00002",WarnIfDifferent=True)


# Once test out the command, use the following to do an exact test of the results:
#
# # Uncomment the following command to regenerate the expected results file.
# SelectTimeSeries(TSList=AllMatchingTSID,TSID="6HourINST")
# # WriteDateValue(OutputFile="ExpectedResults\Test_ChangeInterval_DayMean_To_6HourINST_out.dv",TSList=SelectedTS)
# WriteDateValue(OutputFile="Results\Test_ChangeInterval_DayMean_To_6HourINST_out.dv",TSList=SelectedTS)
# CompareFiles(InputFile1="ExpectedResults\Test_ChangeInterval_DayMean_To_6HourINST",InputFile2="Results\Test_ChangeInterval_DayMean_To_6HourINST",WarnIfDifferent=True)
