# Test reading DISCHRG time series for all intervals from ColoradoWaterSMS web service using TSIDs
StartLog(LogFile="Results/Test_TSIDColoradoWaterSMS_DISCHRG_BIJOUSCO.TSTool.log")
RemoveFile(InputFile="Results/Test_TSIDColoradoWaterSMS_DISCHRG_BIJOUSCO_out.dv",IfNotFound=Ignore)
# Read the same time series from the web service
SetInputPeriod(InputStart="2010-07-01 00:00",InputEnd="2010-07-03 00:00")
ReadTimeSeries(TSID="BIJOUSCO.DWR.DISCHRG.Irregular~ColoradoWaterSMS",Alias="BIJOUSCO-Irregular")
SetInputPeriod(InputStart="2010-07-01 00",InputEnd="2010-07-03 00")
ReadTimeSeries(TSID="BIJOUSCO.DWR.DISCHRG.Hour~ColoradoWaterSMS",Alias="BIJOUSCO-Hour")
# SetInputPeriod(InputStart="2003-07-01",InputEnd="2010-07-15")
SetInputPeriod(InputStart="2010-07-01",InputEnd="2010-07-15")
ReadTimeSeries(TSID="BIJOUSCO.DWR.DISCHRG.Day~ColoradoWaterSMS",Alias="BIJOUSCO-Day")
# Make sure that enough data are available in the test data, and some missing
CheckTimeSeriesStatistic(Statistic="NonmissingCount",CheckCriteria="<=",CheckValue1=10,IfCriteriaMet=Warn)
# CheckTimeSeriesStatistic(Statistic="MissingCount",CheckCriteria="<=",CheckValue1=2,IfCriteriaMet=Warn)
# Uncomment the following command to regenerate the expected results files.
# The following does not work because numbers are slightly different and
# rounding on output produces different values.
# WriteDateValue(OutputFile="ExpectedResults/Test_TSIDColoradoWaterSMS_DISCHRG_BIJOUSCO_Irregular_out.dv",Precision=2,TSList=FirstMatchingTSID,TSID="BIJOUSCO-Irregular")
# WriteDateValue(OutputFile="ExpectedResults/Test_TSIDColoradoWaterSMS_DISCHRG_BIJOUSCO_Hour_out.dv",Precision=2,TSList=FirstMatchingTSID,TSID="BIJOUSCO-Hour")
# WriteDateValue(OutputFile="ExpectedResults/Test_TSIDColoradoWaterSMS_DISCHRG_BIJOUSCO_Day_out.dv",Precision=2,TSList=FirstMatchingTSID,TSID="BIJOUSCO-Day")
# Write out the new results - each interval to a separate file
WriteDateValue(OutputFile="Results/Test_TSIDColoradoWaterSMS_DISCHRG_BIJOUSCO_Irregular_out.dv",Precision=2,TSList=FirstMatchingTSID,TSID="BIJOUSCO-Irregular")
WriteDateValue(OutputFile="Results/Test_TSIDColoradoWaterSMS_DISCHRG_BIJOUSCO_Hour_out.dv",Precision=2,TSList=FirstMatchingTSID,TSID="BIJOUSCO-Hour")
WriteDateValue(OutputFile="Results/Test_TSIDColoradoWaterSMS_DISCHRG_BIJOUSCO_Day_out.dv",Precision=2,TSList=FirstMatchingTSID,TSID="BIJOUSCO-Day")
# Compare files for each interval
CompareFiles(InputFile1="ExpectedResults/Test_TSIDColoradoWaterSMS_DISCHRG_BIJOUSCO_Irregular_out.dv",InputFile2="Results/Test_TSIDColoradoWaterSMS_DISCHRG_BIJOUSCO_Irregular_out.dv",IfDifferent=Warn)
CompareFiles(InputFile1="ExpectedResults/Test_TSIDColoradoWaterSMS_DISCHRG_BIJOUSCO_Hour_out.dv",InputFile2="Results/Test_TSIDColoradoWaterSMS_DISCHRG_BIJOUSCO_Hour_out.dv",IfDifferent=Warn)
CompareFiles(InputFile1="ExpectedResults/Test_TSIDColoradoWaterSMS_DISCHRG_BIJOUSCO_Day_out.dv",InputFile2="Results/Test_TSIDColoradoWaterSMS_DISCHRG_BIJOUSCO_Day_out.dv",IfDifferent=Warn)
