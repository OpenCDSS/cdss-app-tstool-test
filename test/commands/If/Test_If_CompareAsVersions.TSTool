# Test evaluating version comparison in various combinations:
# - use CompareAsVersions
StartLog(LogFile="Results/Test_If_CompareAsVersions.TSTool.log")
SetProperty(PropertyName="VersionSmaller4",PropertyType="String",PropertyValue="1.2.3.dev1")
SetProperty(PropertyName="VersionLarger4",PropertyType="String",PropertyValue="1.2.3.dev2")
SetProperty(PropertyName="VersionSmaller3",PropertyType="String",PropertyValue="1.2.3")
SetProperty(PropertyName="VersionLarger3",PropertyType="String",PropertyValue="1.2.14")
SetProperty(PropertyName="VersionSmaller2",PropertyType="String",PropertyValue="1.2")
SetProperty(PropertyName="VersionLarger2",PropertyType="String",PropertyValue="1.13")
SetProperty(PropertyName="VersionSmaller1",PropertyType="String",PropertyValue="1")
SetProperty(PropertyName="VersionLarger1",PropertyType="String",PropertyValue="2")
#====================================================
# <
If(Name="If_Check_Smaller_LT_Larger_4",Condition="${VersionSmaller4} < ${VersionLarger4}",CompareAsVersions="True")
SetProperty(PropertyName="Test_Version_Smaller_LT_Larger_4",PropertyType="Boolean",PropertyValue="True")
EndIf(Name="If_Check_Smaller_LT_Larger_4")
If(Name="If_Check_Smaller_LT_Larger_3",Condition="${VersionSmaller3} < ${VersionLarger3}",CompareAsVersions="True")
SetProperty(PropertyName="Test_Version_Smaller_LT_Larger_3",PropertyType="Boolean",PropertyValue="True")
EndIf(Name="If_Check_Smaller_LT_Larger_3")
If(Name="If_Check_Smaller_LT_Larger_2",Condition="${VersionSmaller2} < ${VersionLarger2}",CompareAsVersions="True")
SetProperty(PropertyName="Test_Version_Smaller_LT_Larger_2",PropertyType="Boolean",PropertyValue="True")
EndIf(Name="If_Check_Smaller_LT_Larger_2")
If(Name="If_Check_Smaller_LT_Larger_1",Condition="${VersionSmaller1} < ${VersionLarger1}",CompareAsVersions="True")
SetProperty(PropertyName="Test_Version_Smaller_LT_Larger_1",PropertyType="Boolean",PropertyValue="True")
EndIf(Name="If_Check_Smaller_LT_Larger_1")
# Check different version lengths - should return true.
If(Name="If_Check_Smaller_LT_Larger_34",Condition="${VersionSmaller3} < ${VersionLarger4}",CompareAsVersions="True")
SetProperty(PropertyName="Test_Version_Smaller_LT_Larger_34",PropertyType="Boolean",PropertyValue="True")
EndIf(Name="If_Check_Smaller_LT_Larger_34")
If(Name="If_Check_Smaller_LT_Larger_43",Condition="${VersionSmaller4} < ${VersionLarger3}",CompareAsVersions="True")
SetProperty(PropertyName="Test_Version_Smaller_LT_Larger_43",PropertyType="Boolean",PropertyValue="True")
EndIf(Name="If_Check_Smaller_LT_Larger_43")
# Check for code error by reversing the condition order.
If(Name="If_Check_Error_Smaller_LT_Larger_4",Condition="${VersionLarger4} < ${VersionSmaller4}",CompareAsVersions="True")
    Message(Message="Condition did not evaluate correctly.",CommandStatus="FAILURE")
EndIf(Name="If_Check_Error_Smaller_LT_Larger_4")
#====================================================
# <=
If(Name="If_Check_Smaller_LE_Larger_4",Condition="${VersionSmaller4} <= ${VersionLarger4}",CompareAsVersions="True")
SetProperty(PropertyName="Test_Version_Smaller_LE_Larger_4",PropertyType="Boolean",PropertyValue="True")
EndIf(Name="If_Check_Smaller_LE_Larger_4")
If(Name="If_Check_Smaller_LE_Larger_3",Condition="${VersionSmaller3} <= ${VersionLarger3}",CompareAsVersions="True")
SetProperty(PropertyName="Test_Version_Smaller_LE_Larger_3",PropertyType="Boolean",PropertyValue="True")
EndIf(Name="If_Check_Smaller_LE_Larger_3")
If(Name="If_Check_Smaller_LE_Larger_2",Condition="${VersionSmaller2} <= ${VersionLarger2}",CompareAsVersions="True")
SetProperty(PropertyName="Test_Version_Smaller_LE_Larger_2",PropertyType="Boolean",PropertyValue="True")
EndIf(Name="If_Check_Smaller_LE_Larger_2")
If(Name="If_Check_Smaller_LE_Larger_1",Condition="${VersionSmaller1} <= ${VersionLarger1}",CompareAsVersions="True")
SetProperty(PropertyName="Test_Version_Smaller_LE_Larger_1",PropertyType="Boolean",PropertyValue="True")
EndIf(Name="If_Check_Smaller_LE_Larger_1")
# Check different version lengths - should return true
If(Name="If_Check_Smaller_LE_Larger_34",Condition="${VersionSmaller3} <= ${VersionLarger4}",CompareAsVersions="True")
SetProperty(PropertyName="Test_Version_Smaller_LE_Larger_34",PropertyType="Boolean",PropertyValue="True")
EndIf(Name="If_Check_Smaller_LE_Larger_34")
If(Name="If_Check_Smaller_LE_Larger_43",Condition="${VersionSmaller4} <= ${VersionLarger3}",CompareAsVersions="True")
SetProperty(PropertyName="Test_Version_Smaller_LE_Larger_43",PropertyType="Boolean",PropertyValue="True")
EndIf(Name="If_Check_Smaller_LE_Larger_43")
# Check for code error by reversing the condition order.
If(Name="If_Check_Error_Smaller_LE_Larger_4",Condition="${VersionLarger4} <= ${VersionSmaller4}",CompareAsVersions="True")
    Message(Message="Condition did not evaluate correctly.",CommandStatus="FAILURE")
EndIf(Name="If_Check_Error_Smaller_LE_Larger_4")
#====================================================
# >
If(Name="If_Check_Larger_GT_Smaller_4",Condition="${VersionLarger4} > ${VersionSmaller4}",CompareAsVersions="True")
SetProperty(PropertyName="Test_Version_Larger_GT_Smaller_4",PropertyType="Boolean",PropertyValue="True")
EndIf(Name="If_Check_Larger_GT_Smaller_4")
If(Name="If_Check_Larger_GT_Smaller_3",Condition="${VersionLarger3} > ${VersionSmaller3}",CompareAsVersions="True")
SetProperty(PropertyName="Test_Version_Larger_GT_Smaller_3",PropertyType="Boolean",PropertyValue="True")
EndIf(Name="If_Check_Larger_GT_Smaller_3")
If(Name="If_Check_Larger_GT_Smaller_2",Condition="${VersionLarger2} > ${VersionSmaller2}",CompareAsVersions="True")
SetProperty(PropertyName="Test_Version_Larger_GT_Smaller_2",PropertyType="Boolean",PropertyValue="True")
EndIf(Name="If_Check_Larger_GT_Smaller_2")
If(Name="If_Check_Larger_GT_Smaller_1",Condition="${VersionLarger1} > ${VersionSmaller1}",CompareAsVersions="True")
SetProperty(PropertyName="Test_Version_Larger_GT_Smaller_1",PropertyType="Boolean",PropertyValue="True")
EndIf(Name="If_Check_Larger_GT_Smaller_1")
# Check different version lengths - should return true.
If(Name="If_Check_Larger_GT_Smaller_43",Condition="${VersionLarger4} > ${VersionSmaller3}",CompareAsVersions="True")
SetProperty(PropertyName="Test_Version_Larger_GT_Smaller_43",PropertyType="Boolean",PropertyValue="True")
EndIf(Name="If_Check_Larger_GT_Smaller_43")
If(Name="If_Check_Larger_GT_Smaller_34",Condition="${VersionLarger3} > ${VersionSmaller4}",CompareAsVersions="True")
SetProperty(PropertyName="Test_Version_Larger_GT_Smaller_34",PropertyType="Boolean",PropertyValue="True")
EndIf(Name="If_Check_Larger_GT_Smaller_34")
# Check for code error by reversing the condition order.
If(Name="If_Check_Error_Larger_GT_Smaller_4",Condition="${VersionSmaller4} > ${VersionLarger4}",CompareAsVersions="True")
    Message(Message="Condition did not evaluate correctly.",CommandStatus="FAILURE")
EndIf(Name="If_Check_Error_Larger_GT_Smaller_4")
#====================================================
# >=
If(Name="If_Check_Larger_GE_Smaller_4",Condition="${VersionLarger4} >= ${VersionSmaller4}",CompareAsVersions="True")
SetProperty(PropertyName="Test_Version_Larger_GE_Smaller_4",PropertyType="Boolean",PropertyValue="True")
EndIf(Name="If_Check_Larger_GE_Smaller_4")
If(Name="If_Check_Larger_GE_Smaller_3",Condition="${VersionLarger3} >= ${VersionSmaller3}",CompareAsVersions="True")
SetProperty(PropertyName="Test_Version_Larger_GE_Smaller_3",PropertyType="Boolean",PropertyValue="True")
EndIf(Name="If_Check_Larger_GE_Smaller_3")
If(Name="If_Check_Larger_GE_Smaller_2",Condition="${VersionLarger2} >= ${VersionSmaller2}",CompareAsVersions="True")
SetProperty(PropertyName="Test_Version_Larger_GE_Smaller_2",PropertyType="Boolean",PropertyValue="True")
EndIf(Name="If_Check_Larger_GE_Smaller_2")
If(Name="If_Check_Larger_GE_Smaller_1",Condition="${VersionLarger1} >= ${VersionSmaller1}",CompareAsVersions="True")
SetProperty(PropertyName="Test_Version_Larger_GE_Smaller_1",PropertyType="Boolean",PropertyValue="True")
EndIf(Name="If_Check_Larger_GE_Smaller_1")
# Check different version lengths - should return true.
If(Name="If_Check_Larger_GE_Smaller_43",Condition="${VersionLarger4} >= ${VersionSmaller3}",CompareAsVersions="True")
SetProperty(PropertyName="Test_Version_Larger_GE_Smaller_43",PropertyType="Boolean",PropertyValue="True")
EndIf(Name="If_Check_Larger_GE_Smaller_43")
If(Name="If_Check_Larger_GE_Smaller_34",Condition="${VersionLarger3} >= ${VersionSmaller4}",CompareAsVersions="True")
SetProperty(PropertyName="Test_Version_Larger_GE_Smaller_34",PropertyType="Boolean",PropertyValue="True")
EndIf(Name="If_Check_Larger_GE_Smaller_34")
# Check for code error by reversing the condition order.
If(Name="If_Check_Error_Larger_GE_Smaller_4",Condition="${VersionSmaller4} >= ${VersionLarger4}",CompareAsVersions="True")
    Message(Message="Condition did not evaluate correctly.",CommandStatus="FAILURE")
EndIf(Name="If_Check_Error_Larger_GE_Smaller_4")
#====================================================
# ==
If(Name="If_Check_Smaller_EQ_Smaller_4",Condition="${VersionSmaller4} == ${VersionSmaller4}",CompareAsVersions="True")
SetProperty(PropertyName="Test_Version_Smaller_EQ_Smaller_4",PropertyType="Boolean",PropertyValue="True")
EndIf(Name="If_Check_Smaller_EQ_Smaller_4")
If(Name="If_Check_Smaller_EQ_Smaller_3",Condition="${VersionSmaller3} == ${VersionSmaller3}",CompareAsVersions="True")
SetProperty(PropertyName="Test_Version_Smaller_EQ_Smaller_3",PropertyType="Boolean",PropertyValue="True")
EndIf(Name="If_Check_Smaller_EQ_Smaller_3")
If(Name="If_Check_Smaller_EQ_Smaller_2",Condition="${VersionSmaller2} == ${VersionSmaller2}",CompareAsVersions="True")
SetProperty(PropertyName="Test_Version_Smaller_EQ_Smaller_2",PropertyType="Boolean",PropertyValue="True")
EndIf(Name="If_Check_Smaller_EQ_Smaller_2")
If(Name="If_Check_Smaller_EQ_Smaller_1",Condition="${VersionSmaller1} == ${VersionSmaller1}",CompareAsVersions="True")
SetProperty(PropertyName="Test_Version_Smaller_EQ_Smaller_1",PropertyType="Boolean",PropertyValue="True")
EndIf(Name="If_Check_Smaller_EQ_Smaller_1")
# Check different version lengths - should be false.
If(Name="If_Check_Smaller_EQ_Smaller_34",Condition="${VersionSmaller3} == ${VersionSmaller4}",CompareAsVersions="True")
    Message(Message="Condition did not evaluate correctly.",CommandStatus="FAILURE")
EndIf(Name="If_Check_Smaller_EQ_Smaller_34")
#====================================================
# !=
If(Name="If_Check_Smaller_NE_Larger_4",Condition="${VersionSmaller4} != ${VersionLarger4}",CompareAsVersions="True")
SetProperty(PropertyName="Test_Version_Smaller_NE_Larger_4",PropertyType="Boolean",PropertyValue="True")
EndIf(Name="If_Check_Smaller_NE_Larger_4")
If(Name="If_Check_Smaller_NE_Larger_3",Condition="${VersionSmaller3} != ${VersionLarger3}",CompareAsVersions="True")
SetProperty(PropertyName="Test_Version_Smaller_NE_Larger_3",PropertyType="Boolean",PropertyValue="True")
EndIf(Name="If_Check_Smaller_NE_Larger_3")
If(Name="If_Check_Smaller_NE_Larger_2",Condition="${VersionSmaller2} != ${VersionLarger2}",CompareAsVersions="True")
SetProperty(PropertyName="Test_Version_Smaller_NE_Larger_2",PropertyType="Boolean",PropertyValue="True")
EndIf(Name="If_Check_Smaller_NE_Larger_2")
If(Name="If_Check_Smaller_NE_Larger_1",Condition="${VersionSmaller1} != ${VersionLarger1}",CompareAsVersions="True")
SetProperty(PropertyName="Test_Version_Smaller_NE_Larger_1",PropertyType="Boolean",PropertyValue="True")
EndIf(Name="If_Check_Smaller_NE_Larger_1")
# Check same version  should be false.
If(Name="If_Check_Error_Smaller_NE_Larger_4",Condition="${VersionSmaller4} != ${VersionSmaller4}",CompareAsVersions="True")
    Message(Message="Condition did not evaluate correctly.",CommandStatus="FAILURE")
EndIf(Name="If_Check_Error_Smaller_NE_Larger_4")
#====================================================
# Uncomment the next command to regenerate expected results.
# WritePropertiesToFile(OutputFile="ExpectedResults/Test_If_CompareAsVersions_out.txt",IncludeProperties="Test_Version*",SortOrder="Ascending")
WritePropertiesToFile(OutputFile="Results/Test_If_CompareAsVersions_out.txt",IncludeProperties="Test_Version*",SortOrder="Ascending")
# Compare the If_results with the expected.
CompareFiles(InputFile1="ExpectedResults/Test_If_CompareAsVersions_out.txt",InputFile2="Results/Test_If_CompareAsVersions_out.txt",IfDifferent="Warn")
