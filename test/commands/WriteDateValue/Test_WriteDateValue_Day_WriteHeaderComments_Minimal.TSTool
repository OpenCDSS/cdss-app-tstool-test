# Test writing a daily time series to DateValue format:
# - write minimal header comments
# - TODO smalers 2022-5-23 need to figure out how to compare comments to be the same,
#   for now use CompareFiles and look for strings (maybe this is enough)
StartLog(LogFile="Results/Test_WriteDateValue_Day_WriteHeaderComments_Minimal.TSTool.log")
RemoveFile(InputFile="Results/Test_WriteDateValue_Day_WriteHeaderComments_Minimal_out.dv",IfNotFound=Ignore)
NewPatternTimeSeries(Alias="MyLoc",NewTSID="MyLoc..MyData.Day",Description="Test data",SetStart="1950-01-01",SetEnd="1951-03-12",Units="CFS",PatternValues="5,10,12,13,75")
# Uncomment the following command to regenerate the expected results file:
# - don't specify WriteHeaderComments because the default is Full
# WriteDateValue(OutputFile="ExpectedResults\Test_WriteDateValue_Day_WriteHeaderComments_Minimal_out.dv",WriteHeaderComments=Minimal)
# Generate new output...
WriteDateValue(OutputFile="Results/Test_WriteDateValue_Day_WriteHeaderComments_Minimal_out.dv",WriteHeaderComments=Minimal)
# Do regression comparison:
# - comments are ignored so have to use CheckFile and substrings to confirm contents
CompareFiles(InputFile1="ExpectedResults\Test_WriteDateValue_Day_WriteHeaderComments_Minimal_out.dv",InputFile2="Results/Test_WriteDateValue_Day_WriteHeaderComments_Minimal_out.dv",IfDifferent=Warn)
CheckFile(InputFile="Results/Test_WriteDateValue_Day_WriteHeaderComments_Minimal_out.dv",Statistic="PatternMatchLineCount",SearchPattern="*File generated by*",CheckCriteria="<",CheckValue1=1)
CheckFile(InputFile="Results/Test_WriteDateValue_Day_WriteHeaderComments_Minimal_out.dv",Statistic="PatternMatchLineCount",SearchPattern="*# Commands:*",CheckCriteria=">",CheckValue1=0)
